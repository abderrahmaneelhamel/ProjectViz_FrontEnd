<div class="flex justify-center items-center pt-10 max-h-screen mt-20">
  <div class="sidebar bg-white w-1/4 h-screen p-4 overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Conversations</h2>
    <ul>
      <li *ngFor="let conversation of Conversations" class="flex justify-between cursor-pointer py-2 border-b border-gray-200 hover:bg-gray-200">
        <div (click)="selectConversation(conversation)">
          {{ conversation.prompt | slice:0:25 }}{{ conversation.prompt.length > 25 ? '...' : '' }}
        </div>
        <img src="../../../assets/delete.png" (click)="deleteConversation(conversation.id)" class="max-h-8">
      </li>
    </ul>
  </div>

  <div class="w-full flex flex-col items-center justify-between min-h-screen p-4 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500">
    <div class="max-h-screen w-full overflow-y-auto">
      <div *ngIf="!response?.projectAnalysis && !loading" class="flex justify-center items-center pt-10">
        <img src="../../../assets/undraw_analysis.svg" alt="">
      </div>
      <div *ngIf="loading; else chatContent" class="typewriter mt-10">
        <div class="slide"><i></i></div>
        <div class="paper"></div>
        <div class="keyboard"></div>
      </div>
      <ng-template #chatContent>
        <div *ngIf="response?.projectAnalysis" class="bg-white mb-40 mt-28 border p-4 rounded-md shadow-lg w-full overflow-y-auto">

        <div class="bot-response">
          <ng-container *ngIf="response?.projectAnalysis">
            <div class="font-bold text-xl mb-4">ProjectViz Summary:</div>
            <ul>
              <li class="mb-4" *ngFor="let paragraph of splitIntoParagraphs(response.projectAnalysis, 2)">
                {{ paragraph }}
              </li>
            </ul>
          </ng-container>
  
          <ng-container *ngIf="response.techologieRecomendation">
            <div class="font-bold text-xl mb-4">Technology Recommendations:</div>
            <ul>
              <li class="mb-4" *ngFor="let recommendation of splitIntoParagraphs(response.techologieRecomendation, 2)">
                {{ recommendation }}
              </li>
            </ul>
          </ng-container>
          <div>
            <div>
              <img
                *ngIf="response.useCaseUML"
                [src]="'data:image/png;base64,' + response.useCaseUML"
                alt="Use Case UML Diagram"
                class="max-w-full"
              />
              <div class="w-52 mx-2 z-40">
                <a [href]="'data:image/png;base64,' + response.useCaseUML" download class="cssbuttons-io-button">
                    <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M1 14.5a6.496 6.496 0 0 1 3.064-5.519 8.001 8.001 0 0 1 15.872 0 6.5 6.5 0 0 1-2.936 12L7 21c-3.356-.274-6-3.078-6-6.5zm15.848 4.487a4.5 4.5 0 0 0 2.03-8.309l-.807-.503-.12-.942a6.001 6.001 0 0 0-11.903 0l-.12.942-.805.503a4.5 4.5 0 0 0 2.029 8.309l.173.013h9.35l.173-.013zM13 12h3l-4 5-4-5h3V8h2v4z" fill="currentColor"></path>
                    </svg>
                    <span>Download Image</span>
                </a>
              </div>
            </div>
            <div>
              <img
                *ngIf="response.sequenceUML"
                [src]="'data:image/png;base64,' + response.sequenceUML"
                alt="sequence UML Diagram"
                class="max-w-full"
              />
              <div class="w-52 mx-2 z-40">
                <a [href]="'data:image/png;base64,' + response.sequenceUML" download class="cssbuttons-io-button">
                    <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M1 14.5a6.496 6.496 0 0 1 3.064-5.519 8.001 8.001 0 0 1 15.872 0 6.5 6.5 0 0 1-2.936 12L7 21c-3.356-.274-6-3.078-6-6.5zm15.848 4.487a4.5 4.5 0 0 0 2.03-8.309l-.807-.503-.12-.942a6.001 6.001 0 0 0-11.903 0l-.12.942-.805.503a4.5 4.5 0 0 0 2.029 8.309l.173.013h9.35l.173-.013zM13 12h3l-4 5-4-5h3V8h2v4z" fill="currentColor"></path>
                    </svg>
                    <span>Download Image</span>
                </a>
              </div>
            </div>
            <div>
              <img
                *ngIf="response.classUML"
                [src]="'data:image/png;base64,' + response.classUML"
                alt="Class UML Diagram"
                class="max-w-full"
              />
              <div class="w-52 mx-2 z-40">
                <a [href]="'data:image/png;base64,' + response.classUML" download class="cssbuttons-io-button">
                    <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M1 14.5a6.496 6.496 0 0 1 3.064-5.519 8.001 8.001 0 0 1 15.872 0 6.5 6.5 0 0 1-2.936 12L7 21c-3.356-.274-6-3.078-6-6.5zm15.848 4.487a4.5 4.5 0 0 0 2.03-8.309l-.807-.503-.12-.942a6.001 6.001 0 0 0-11.903 0l-.12.942-.805.503a4.5 4.5 0 0 0 2.029 8.309l.173.013h9.35l.173-.013zM13 12h3l-4 5-4-5h3V8h2v4z" fill="currentColor"></path>
                    </svg>
                    <span>Download Image</span>
                </a>
              </div>
          </div>
        </div>
        </div>
      </div>
    </ng-template>
  </div>

  <div class="bg-white flex items-center w-full fixed bottom-0 left-0 p-4">
    <textarea
      #userPromptTextarea
      [(ngModel)]="userPrompt"
      placeholder="Describe your project here..."
      (change)="adjustTextareaRows()"
      class="w-full flex-1 p-2 border border-gray-300 rounded-lg focus:outline-none mr-5 focus:border-blue-500 resize-none"
      rows="1"
    ></textarea>
    <div class="flex items-center">
      <span class="mr-2">{{ userPrompt.length }}/100</span> characters
    </div>
    <button class="ml-4 button" (click)="submitPrompt()">
      <div class="svg-wrapper-1">
        <div class="svg-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path fill="none" d="M0 0h24v24H0z"></path>
            <path fill="currentColor" d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"></path>
          </svg>
        </div>
      </div>
      <span>Generate âœ¨</span>
    </button>
  </div>
</div>
</div>